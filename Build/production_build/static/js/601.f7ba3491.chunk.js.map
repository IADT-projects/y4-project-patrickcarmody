{"version":3,"file":"static/js/601.f7ba3491.chunk.js","mappings":"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","sources":["pages/charities/Withdraw.js"],"sourcesContent":["import { KeyboardArrowLeft } from \"@mui/icons-material\";\r\nimport { Box, Button, Divider, Grid, IconButton, Stack, Typography } from \"@mui/material\";\r\nimport { useEffect, useState } from \"react\";\r\nimport { useNavigate, useParams } from \"react-router\";\r\nimport { useAccount, useBalance } from \"wagmi\";\r\nimport PageContainer from \"../../components/PageContainer\";\r\nimport { UserContext } from \"../../context/UserContext\";\r\nimport axios from '../../config';\r\nimport useWithdraw from \"../../hooks/useWithdraw\";\r\nimport { ethers } from \"ethers\";\r\nimport useReadWithArgs from \"../../hooks/useReadWithArgs\";\r\nimport GetTotalDepositsABI from '../../assets/abi/getTotalDeposits.json';\r\n\r\nconst Withdraw = () => {\r\n    const { id } = useParams();\r\n    const navigate = useNavigate();\r\n    \r\n    const [charity, setCharity] = useState({});\r\n    const [totalRaised, setTotalRaised] = useState(0);\r\n    const [contractBalance, setContractBalance] = useState(0);\r\n    \r\n    const { data: balanceData } = useBalance({\r\n        address: charity.address,\r\n        watch: true,\r\n    })\r\n\r\n    const { data: totalDepositsData } = useReadWithArgs(charity.address, GetTotalDepositsABI, \"getTotalDeposits\", []);\r\n\r\n    useEffect(() => {\r\n        if(balanceData) {\r\n            setContractBalance(balanceData.formatted);\r\n        }\r\n        if(totalDepositsData) {\r\n            setTotalRaised(ethers.utils.formatEther(totalDepositsData));\r\n        }\r\n    })\r\n    useEffect(() => {\r\n        axios.get(`/charities/${id}`)\r\n        .then((res) => {setCharity(res.data);})\r\n        .catch((err) => {console.error(err)})\r\n    }, [])\r\n\r\n    const { withdraw, isLoading } = useWithdraw(charity.address);\r\n\r\n    const handleWithdraw = () => {\r\n        withdraw?.()\r\n    }\r\n    \r\n    return(\r\n        <PageContainer title='Withdraw' description='withdraw'>\r\n        <Grid container direction={\"row\"}>\r\n            <IconButton onClick={() => navigate(-1)}>\r\n                <KeyboardArrowLeft/>\r\n            </IconButton>\r\n            <Typography variant=\"h3\" marginY={2}>Withdraw Balance</Typography>\r\n        </Grid>\r\n        <Box\r\n            sx={{ \r\n                padding: 3, \r\n                width: '100%', \r\n                height: '100%', \r\n                bgcolor: '#fafafa',\r\n                border: '1px solid #f2f2f2',\r\n                borderRadius: 2\r\n            }}\r\n        >\r\n            <Grid container>\r\n                <Grid item md={6} sx={12}>\r\n                    <Box\r\n                        sx={{\r\n                            display: 'flex',\r\n                            flexDirection: 'column',\r\n                            width: '100%',\r\n                            alignItems: 'center'\r\n                        }}\r\n                    >\r\n                        <Typography textAlign='center' sx={{ mb: 3.5, fontSize: \"20px\", fontWeight: 'bold' }}>\r\n                            {charity.title}\r\n                        </Typography>\r\n                        <Stack spacing={2}\r\n                            sx={{\r\n                                justifyContent: 'center',\r\n                                mr: 2,\r\n                                borderRadius: 2,\r\n                                width: '100%',\r\n                                height: '180px',\r\n                                p: 2,\r\n                                boxShadow: 'rgba(149, 157, 165, 0.2) 0px 8px 24px',\r\n                            }}\r\n                        >\r\n                            <Typography sx={{ fontSize: \"15px\", fontWeight: 550 }}>\r\n                                Available balance: {contractBalance} MATIC\r\n                            </Typography>\r\n                            <Divider/>\r\n                            <Typography sx={{ fontSize: \"15px\", fontWeight: 500 }}>\r\n                                Total Raised: {totalRaised} MATIC\r\n                            </Typography>\r\n                            <Divider/>\r\n                            <Typography sx={{ fontSize: \"15px\", fontWeight: 500 }}>\r\n                                <b>Total withdrawn: TBD MATIC</b>\r\n                            </Typography>\r\n                        </Stack>\r\n                    </Box>\r\n                </Grid>\r\n                <Grid item md={6} sx={12}>\r\n                    <Box\r\n                        sx={{\r\n                            display: 'flex',\r\n                            flexDirection: 'column',\r\n                            width: '100%',\r\n                            alignItems: 'center'\r\n                        }}\r\n                    >\r\n                        <Typography textAlign='center' sx={{ mb: 3.5, fontSize: \"20px\", fontWeight: 'bold' }}>\r\n                            Withdraw\r\n                        </Typography>\r\n                        <Stack spacing={2}\r\n                            sx={{\r\n                                ml: 2,\r\n                                borderRadius: 2,\r\n                                width: '100%',\r\n                                height: '180px',\r\n                                p: 2,\r\n                                boxShadow: 'rgba(149, 157, 165, 0.2) 0px 8px 24px',\r\n                            }}\r\n                        >\r\n                            <Typography sx={{fontSize: '15px'}}>Withdrawing your charity's balance will not affect the progress displayed on the site</Typography>\r\n                            <Typography textAlign={'center'} sx={{fontSize: '15px', fontWeight: 500}}>Click below to withdraw {contractBalance} MATIC</Typography>\r\n                            <Button variant=\"contained\" onClick={handleWithdraw} disabled={contractBalance < 0.01}>\r\n                                { isLoading ? (\"Loading\") : (\"Withdraw\")}\r\n                            </Button>\r\n                        </Stack>\r\n                    </Box>\r\n                </Grid>\r\n            </Grid>\r\n        </Box>\r\n        </PageContainer>\r\n    )\r\n}\r\n\r\nexport default Withdraw;"],"names":["id","useParams","navigate","useNavigate","_useState","useState","_useState2","_slicedToArray","charity","setCharity","_useState3","_useState4","totalRaised","setTotalRaised","_useState5","_useState6","contractBalance","setContractBalance","balanceData","useBalance","address","watch","data","totalDepositsData","useReadWithArgs","GetTotalDepositsABI","useEffect","formatted","ethers","axios","concat","then","res","catch","err","console","error","_useWithdraw","useWithdraw","withdraw","isLoading","_jsxs","PageContainer","title","description","children","Grid","container","direction","_jsx","IconButton","onClick","KeyboardArrowLeft","Typography","variant","marginY","Box","sx","padding","width","height","bgcolor","border","borderRadius","item","md","display","flexDirection","alignItems","textAlign","mb","fontSize","fontWeight","Stack","spacing","justifyContent","mr","p","boxShadow","Divider","ml","Button","disabled"],"sourceRoot":""}